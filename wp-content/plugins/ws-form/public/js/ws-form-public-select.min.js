!function(t){"use strict";t.WS_Form.prototype.form_select2=function(e){void 0===e&&(e=t("[data-wsf-select2]",this.form_canvas_obj));var a=this;void 0!==jQuery().select2&&e.each(function(){var e=a.get_field_id(t(this)),s=a.get_field(t(this)),i=a.get_object_meta_value(s,"placeholder_row",""),n=ws_form_settings.locale.substring(0,2),r=ws_form_settings.url_ajax+"field/"+e+"/select-ajax/",o={templateSelection:function(e){return void 0!==e.data_price&&t(e.element).attr("data-price",e.data_price),e.text},allowClear:!0,placeholder:i,language:n,selectionCssClass:"wsf-select2-selection",dropdownCssClass:"wsf-select2-dropdown",dropdownParent:t(this).parent()};!("on"==a.get_object_meta_value(s,s.type+"_cascade",""))&&"on"==a.get_object_meta_value(s,"select2_ajax","")&&(o.ajax={url:r,dataType:"json",data:function(e){var s={id:a.form_id,preview:a.form_canvas_obj[0].hasAttribute("data-preview"),keyword:e.term};if(void 0!==t(this).attr("data-wsf-populate")){var i=t(this).attr("data-wsf-populate");""!==i&&(s.value=i),t(this).removeAttr("data-wsf-populate")}return ws_form_settings.wsf_nonce&&(s[ws_form_settings.wsf_nonce_field_name]=ws_form_settings.wsf_nonce),ws_form_settings.x_wp_nonce&&(s._wpnonce=ws_form_settings.x_wp_nonce),s},delay:250,cache:!0});var l,_="on"==a.get_object_meta_value(s,"multiple",""),c="on"==a.get_object_meta_value(s,"select2_tags","");(_&&c&&(o.tags=!0),l=t(this).closest('[data-type="select"]').attr("data-select-max"))&&((l=parseInt(l,10))>0&&(o.maximumSelectionLength=l));var d=t(this).select2(o);d.on("select2:open",function(e){t(".select2-search__field",t(this).parent()).get(0).focus()});var p=void 0!==t(this).attr("data-wsf-populate")?t(this).attr("data-wsf-populate"):"";if(""!==p){var f=new FormData;f.append("id",a.form_id),f.append("preview",a.form_canvas_obj[0].hasAttribute("data-preview")),f.append("value",p),a.api_call("field/"+e+"/select-ajax/","GET",f,function(e){if(e.results)for(var a in e.results)if(e.results.hasOwnProperty(a)){var s=e.results[a],i=t("<option>");i.attr("value",s.id).attr("selected","").html(s.text),d.append(i)}})}})},t.WS_Form.prototype.form_select_min_max=function(){var e=this;t("[data-select-min]:not([data-select-min-max-init]),[data-select-max]:not([data-select-min-max-init])",this.form_canvas_obj).each(function(){var a=t(this).attr("data-select-min"),s=t(this).attr("data-select-max");if(void 0!==a||void 0!==s){var i=t(this).attr("data-id"),n=e.get_section_repeatable_suffix(t(this)),r=t('<input type="number" id="'+e.form_id_prefix+"select-min-max-"+i+n+'" data-select-min-max data-progress-include="change" style="display:none !important;" aria-label="Validator" />',e.form_canvas_obj);void 0!==a&&r.attr("min",a),void 0!==s&&r.attr("max",s),s=parseInt(s,10);var o=t("select option:selected",t(this)).length;r.attr("value",o);var l=e.get_invalid_feedback_obj(t(this));l.length?l.before(r):t(this).append(r),t("select",t(this)).on("change",function(){var a=e.get_field_wrapper(t(this)),s=e.get_field_id(t(this)),i=e.get_section_repeatable_suffix(t(this)),n=t("select option:selected",a).length;t("#"+e.form_id_prefix+"select-min-max-"+s+i,e.form_canvas_obj).val(n).trigger("change")}),t(this).attr("data-select-min-max-init","")}})}}(jQuery);